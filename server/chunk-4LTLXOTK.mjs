import './polyfills.server.mjs';
import{Ua as a,Va as c,g as o,j as n}from"./chunk-Q6QYHI2G.mjs";import{h as i}from"./chunk-5XUXGTUW.mjs";var f=(()=>{class r{constructor(t){this.http=t,this.apiLink="http://localhost:7399",this.csrfToken=""}ngOnInit(){return i(this,null,function*(){let t=localStorage.getItem("csrfToken");t?this.csrfToken=t:this.fetchCsrfToken()})}fetchCsrfToken(){let t=this.apiLink+"/csrf-token";return this.http.get(t,{withCredentials:!0}).subscribe(e=>{this.csrfToken=e.csrfToken,localStorage.setItem("csrfToken",this.csrfToken)})}getHeaders(){return new a({"Content-Type":"application/json","X-CSRF-Token":localStorage.getItem("csrfToken")||this.csrfToken||""})}getData(t){let e=this.apiLink+t;return console.log("url",e),this.http.get(e,{headers:this.getHeaders(),withCredentials:!0})}getDataWithParams(t,e){let s=this.apiLink+t;return console.log("url",s),console.log("params",e),this.http.post(s,e,{headers:this.getHeaders(),withCredentials:!0})}static{this.\u0275fac=function(e){return new(e||r)(n(c))}}static{this.\u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{f as a};
