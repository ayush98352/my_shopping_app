import './polyfills.server.mjs';
import{Ua as n,Va as c,g as i,j as s}from"./chunk-Q6QYHI2G.mjs";import{h as a}from"./chunk-5XUXGTUW.mjs";var h=(()=>{class r{constructor(){this.data=null,this.productDetails={},this.csrfToken={}}setData(t){this.data=t}getData(){return this.data}setProductDetails(t){this.productDetails=t}getProductDetails(){return this.productDetails}setcsrfToken(t){this.csrfToken=t}getcsrfToken(){return this.csrfToken}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var u=(()=>{class r{constructor(t,e){this.http=t,this.dataShareService=e,this.apiLink="https://my-shopping-app-node-production.up.railway.app",this.csrfToken=""}ngOnInit(){return a(this,null,function*(){let t=localStorage.getItem("csrfToken");t?this.csrfToken=t:this.fetchCsrfToken()})}fetchCsrfToken(){let t=this.apiLink+"/csrf-token";return this.http.get(t,{withCredentials:!0}).subscribe(e=>{this.csrfToken=e.csrfToken,this.dataShareService.setcsrfToken(this.csrfToken)})}getHeaders(){let t=this.dataShareService.getcsrfToken();return new n({"Content-Type":"application/json","X-CSRF-Token":t||this.csrfToken||""})}getData(t){let e=this.apiLink+t;return console.log("url",e),this.http.get(e,{headers:this.getHeaders(),withCredentials:!0})}getDataWithParams(t,e){let o=this.apiLink+t;return console.log("url",o),console.log("params",e),this.http.post(o,e,{headers:this.getHeaders(),withCredentials:!0})}static{this.\u0275fac=function(e){return new(e||r)(s(c),s(h))}}static{this.\u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{h as a,u as b};
